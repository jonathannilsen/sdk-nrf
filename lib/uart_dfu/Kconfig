#
# Copyright (c) 2020 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-BSD-5-Clause-Nordic
#

menu "UART DFU Library"

# UART DFU library configuration

config UART_DFU_LIBRARY
	bool "UART DFU library"
	depends on SERIAL
	depends on UART_ASYNC_API
	depends on UART_DFU_CLI || UART_DFU_SRV

config UART_DFU_LIBRARY_THREAD_PRIO
	int "UART DFU library workqueue thread priority level"
	range 0 NUM_PREEMPT_PRIORITIES
	default 0 if !MULTITHREADING
	default 10

config UART_DFU_LIBRARY_THREAD_STACK_SIZE
	int "UART DFU library workqueue thread stack size"
	default 1024

config UART_DFU_DEFAULT_SEND_TIMEOUT
	int # Default send timeout (ms)
	default 1000

config UART_DFU_DEFAULT_RESPONSE_TIMEOUT
	int # Default response timeout (ms)
	default 10000


# UART DFU client configuration

config UART_DFU_CLI
	bool "UART DFU client"
	default n

if UART_DFU_CLI

config UART_DFU_CLI_SEND_TIMEOUT
	int "UART DFU client send timeout (ms)"
	default UART_DFU_DEFAULT_SEND_TIMEOUT

config UART_DFU_CLI_RESPONSE_TIMEOUT
	int "UART DFU client response timeout (ms)"
	default UART_DFU_DEFAULT_RESPONSE_TIMEOUT

endif # UART_DFU_CLI


# UART DFU server configuration

config UART_DFU_SRV
	bool "UART DFU server"
	default n

if UART_DFU_SRV

config UART_DFU_SRV_SEND_TIMEOUT
	int "UART DFU server send timeout (ms)"
	default UART_DFU_DEFAULT_SEND_TIMEOUT

config UART_DFU_SRV_RESPONSE_TIMEOUT
	int "UART DFU server response timeout (ms)"
	default UART_DFU_DEFAULT_RESPONSE_TIMEOUT

endif # UART_DFU_SRV

module=UART_DFU_LIBRARY
module-str=UART DFU library
source "${ZEPHYR_BASE}/subsys/logging/Kconfig.template.log_config"


# UART DFU host configuration

config UART_DFU_HOST
	bool "UART DFU host"
	depends on UART_DFU_SRV
	depends on DFU_TARGET
	depends on POLL

config UART_DFU_HOST_MAX_FRAGMENT_SIZE
	int "UART DFU host maximum fragment size."
	default 2048

module=UART_DFU_HOST
module-str=UART DFU host
source "${ZEPHYR_BASE}/subsys/logging/Kconfig.template.log_config"

endmenu
