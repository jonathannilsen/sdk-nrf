#
# Copyright (c) 2019 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-BSD-5-Clause-Nordic
#

# Default sample configuration
CONFIG_NCS_SAMPLES_DEFAULTS=y

# Bootloader configuration
CONFIG_BOOTLOADER_MCUBOOT=y

# Serial configuration
CONFIG_SERIAL=y                     # Required by UART_DFU_LIBRARY
CONFIG_UART_ASYNC_API=y             # Required by UART_DFU_LIBRARY
CONFIG_UART_INTERRUPT_DRIVEN=n
# TODO: Make the following configuration option prettier.
CONFIG_UART_1_NRF_FLOW_CONTROL=y    # Required?

# Connect pins between nRF9160 and nRF52840 for UART
CONFIG_BOARD_NRF9160DK_INTERFACE0_MCU=y
CONFIG_BOARD_NRF9160DK_INTERFACE1_MCU=y
# Connect nRF9160 UARTE 1 to VCOM2
CONFIG_BOARD_NRF9160DK_UART1_VCOM=y

# DFU target configuration
CONFIG_DFU_TARGET=y
CONFIG_DFU_TARGET_MCUBOOT=y
CONFIG_IMG_MANAGER=y                # Required by CONFIG_DFU_TARGET_MCUBOOT
CONFIG_IMG_ERASE_PROGRESSIVELY=y    # Required by CONFIG_DFU_TARGET_MCUBOOT
CONFIG_MCUBOOT_IMG_MANAGER=y        # Required by CONFIG_IMG_ERASE_PROGRESSIVELY
CONFIG_FLASH=y                      # Required by CONFIG_IMG_MANAGER and CONFIG_IMG_ERASE_PROGRESSIVELY
CONFIG_DFU_TARGET_UART=n
CONFIG_DFU_TARGET_MODEM=n

# UART DFU configuration
CONFIG_UART_DFU_LIBRARY=y
CONFIG_UART_DFU_SYS_INIT=y
CONFIG_UART_DFU_TARGET_SERVER=y
CONFIG_UART_DFU_UART_1=y